import{e as o,ab as a,d as e,a8 as n,u as t,h as l,l as r,o as s,j as i,k as g,a9 as d,m as c,n as u}from"./vendor.1cb7f2f0.js";import{s as f,A as y,c as _}from"./index.f7adef75.js";var p=o({setup(){const{load:o,onResult:r,onError:s}=a(y);r((o=>{window.location.href=o.data.authUrl})),s((()=>{e.error("Sorry! We weren't able to log you in. Please try again later!")}));const i=new URL(window.location.href).searchParams.get("code");n((()=>{i&&g()}));const{mutate:g,loading:d,error:c,onDone:u}=t(_,(()=>({variables:{input:{code:i}}}))),p=l();return u((o=>{f(o.data.login),sessionStorage.setItem("token",o.data.login.token),e.info("You 've successfully logged in!"),p.push(`/user/${o.data.login.id}`)})),{handleConsentPage:function(){o()},loginLoading:d,loginError:c}}});const h={class:"log-in-card__intro"},b=c("span",{role:"img","aria-label":"wave"}," ðŸ‘‹ ",-1),m=u(" Log in to TinyHouse! "),w=u(" Sign in with Google to start booking available rentals! "),v=c("img",{src:"/assets/google_logo.9376fb33.jpeg",alt:"Google Logo",class:"log-in-card__google-button-logo"},null,-1),k=c("span",{class:"log-in-card__google-button-text"}," Sign in with Google ",-1),L=u(" Note: By signing in, you 'll be redirected to the Google consent form to sign in with your Google account. ");p.render=function(o,a,e,n,t,l){const u=r("a-spin"),f=r("ErrorBanner"),y=r("a-typography-title"),_=r("a-typography-text"),p=r("a-card"),P=r("a-layout-content");return s(),i(P,{class:"log-in"},{default:g((()=>[o.loginLoading?(s(),i(u,{key:0,size:"large",tip:"Logging you in..."})):o.loginError?(s(),i(f,{key:1,description:"Sorry! We weren't able to log you in. Please try again later!"})):d("",!0),c(p,{class:"log-in-card"},{default:g((()=>[c("div",h,[c(y,{level:3,class:"log-in-card__intro-title"},{default:g((()=>[b])),_:1}),c(y,{level:3,class:"log-in-card__intro-title"},{default:g((()=>[m])),_:1}),c(_,null,{default:g((()=>[w])),_:1})]),c("button",{class:"log-in-card__google-button",onClick:a[1]||(a[1]=(...a)=>o.handleConsentPage&&o.handleConsentPage(...a))},[v,k]),c(_,{type:"secondary"},{default:g((()=>[L])),_:1})])),_:1})])),_:1})};export default p;
