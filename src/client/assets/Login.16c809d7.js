import{d as o,ad as a,b as e,a9 as n,u as t,f as l,k as r,o as s,i,j as g,aa as d,l as c,m as u}from"./vendor.f6cb48f4.js";import{s as y,A as f,b as _}from"./index.550d8566.js";var p=o({setup(){const{load:o,onResult:r,onError:s}=a(f);r((o=>{window.location.href=o.data.authUrl})),s((()=>{e.error("Sorry! We weren't able to log you in. Please try again later!")}));const i=new URL(window.location.href).searchParams.get("code");n((()=>{i&&g()}));const{mutate:g,loading:d,error:c,onDone:u}=t(_,(()=>({variables:{input:{code:i}}}))),p=l();return u((o=>{y(o.data.login),sessionStorage.setItem("token",o.data.login.token),e.info("You 've successfully logged in!"),p.push(`/user/${o.data.login.id}`)})),{handleConsentPage:function(){o()},loginLoading:d,loginError:c}}});const b={class:"log-in-card__intro"},h=c("span",{role:"img","aria-label":"wave"}," ðŸ‘‹ ",-1),m=u(" Log in to TinyHouse! "),w=u(" Sign in with Google to start booking available rentals! "),v=c("img",{src:"/assets/google_logo.9376fb33.jpeg",alt:"Google Logo",class:"log-in-card__google-button-logo"},null,-1),k=c("span",{class:"log-in-card__google-button-text"}," Sign in with Google ",-1),L=u(" Note: By signing in, you 'll be redirected to the Google consent form to sign in with your Google account. ");p.render=function(o,a,e,n,t,l){const u=r("a-spin"),y=r("ErrorBanner"),f=r("a-typography-title"),_=r("a-typography-text"),p=r("a-card"),P=r("a-layout-content");return s(),i(P,{class:"log-in"},{default:g((()=>[o.loginLoading?(s(),i(u,{key:0,size:"large",tip:"Logging you in..."})):o.loginError?(s(),i(y,{key:1,description:"Sorry! We weren't able to log you in. Please try again later!"})):d("",!0),c(p,{class:"log-in-card"},{default:g((()=>[c("div",b,[c(f,{level:3,class:"log-in-card__intro-title"},{default:g((()=>[h])),_:1}),c(f,{level:3,class:"log-in-card__intro-title"},{default:g((()=>[m])),_:1}),c(_,null,{default:g((()=>[w])),_:1})]),c("button",{class:"log-in-card__google-button",onClick:a[1]||(a[1]=(...a)=>o.handleConsentPage&&o.handleConsentPage(...a))},[v,k]),c(_,{type:"secondary"},{default:g((()=>[L])),_:1})])),_:1})])),_:1})};export default p;
